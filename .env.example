# =============================================================================
# VALIDATION PORTAL - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
# Never commit .env to git!

# -----------------------------------------------------------------------------
# Database Configuration (Required)
# -----------------------------------------------------------------------------
# MongoDB connection string to the validation cluster
MONGODB_VALIDATION_URI=mongodb+srv://[username]:[password]@validation.mongodb.net/?appName=validation

# Database name: use 'validation-dev' for development, 'validation-prod' for production
MONGODB_VALIDATION_DB=validation-prod

# -----------------------------------------------------------------------------
# KoboToolbox Configuration (Stored per-survey in MongoDB)
# -----------------------------------------------------------------------------
# NOTE: KoboToolbox configuration is now stored in the MongoDB 'surveys' collection.
# Each survey has its own kobo_config with API URL and token.
# See CLAUDE.md for details on multi-survey architecture.
#
# To configure KoboToolbox for your surveys:
#   - Run: node scripts/update_single_survey.R
#   - Or batch update: node scripts/update_all_surveys.R
#
# Legacy variables (no longer used):
# KOBO_API_URL=https://eu.kobotoolbox.org/api/v2
# KOBO_API_TOKEN=your_kobo_api_token_here
# KOBO_ASSET_ID=your_primary_asset_id

# -----------------------------------------------------------------------------
# Server Configuration (Optional)
# -----------------------------------------------------------------------------
# Backend server port (default: 3001)
PORT=3001

# Node environment: development or production (affects CORS behavior)
NODE_ENV=development

# -----------------------------------------------------------------------------
# Security Configuration (CRITICAL for Production)
# -----------------------------------------------------------------------------
# JWT Secret Key - MUST be set to a secure random string in production
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=change-this-to-a-secure-random-string-in-production

# JWT Token Expiry (default: 7d)
# Examples: 1h, 24h, 7d, 30d
JWT_EXPIRY=7d

# Allowed CORS Origins (comma-separated list for production)
# For local development, all origins are allowed when NODE_ENV=development
# For production, specify your deployment URLs:
# ALLOWED_ORIGINS=https://your-app.vercel.app,https://your-custom-domain.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# -----------------------------------------------------------------------------
# User Management
# -----------------------------------------------------------------------------
# Users are stored in MongoDB (users collection)
# To create your first admin user, run:
#   node scripts/create_first_admin.js
# Or use the quick command:
#   node scripts/create_admin_simple.js username email password

# -----------------------------------------------------------------------------
# Frontend Configuration (for Production/Vercel)
# -----------------------------------------------------------------------------
# Production API URL - use relative path for Vercel serverless functions
VITE_API_URL=/api

# -----------------------------------------------------------------------------
# Airtable Integration (Optional - for user/survey syncing)
# -----------------------------------------------------------------------------
# Airtable API configuration (optional, only needed if syncing from Airtable)
# AIRTABLE_API_KEY=your_airtable_personal_access_token
# AIRTABLE_BASE_ID=your_airtable_base_id

# -----------------------------------------------------------------------------
# IMPORTANT PRODUCTION DEPLOYMENT NOTES
# -----------------------------------------------------------------------------
# When deploying to Vercel, set these environment variables in the dashboard:
#
# Required:
#   - MONGODB_VALIDATION_URI
#   - MONGODB_VALIDATION_DB=validation-prod
#   - JWT_SECRET (generate a secure random string!)
#   - VITE_API_URL=/api
#
# Recommended:
#   - NODE_ENV=production
#   - JWT_EXPIRY=7d
#   - ALLOWED_ORIGINS=https://your-app.vercel.app
#
# See PRODUCTION_READINESS_PLAN.md for complete security checklist
